# Use the latest 2.1 version of CircleCI pipeline process engine. See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
orbs:
  docker: circleci/docker@1.5.0
workflows:
  build-docker-images-test:
    triggers:
      - schedule:
          cron: "* * * * *"
          filters:
             branches:
               only:
                 - dev
    jobs:
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_backend/
          image: eduroom-backend:$CIRCLE_PROJECT_REPONAME
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_frontend/
          image: eduroom-frontend:$CIRCLE_PROJECT_REPONAME
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_grading_server/
          image: eduroom-grading-server:$CIRCLE_PROJECT_REPONAME
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_socket_chat/
          image: eduroom-socket-chat:$CIRCLE_PROJECT_REPONAME
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_socket_kahoot/
          image: eduroom-socket-kahoot:$CIRCLE_PROJECT_REPONAME
