# Use the latest 2.1 version of CircleCI pipeline process engine. See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
orbs:
  docker: circleci/docker@1.5.0
workflows:
  build-docker-images-test:
    jobs:
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_backend
          image: eduroom-backend
          filters:
            branches:
              only:
                - dev
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_frontend
          image: eduroom-frontend
          filters:
            branches:
              only:
                - dev
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_grading_server
          image: eduroom-grading-server
          filters:
            branches:
              only:
                - dev
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_socket_chat
          image: eduroom-socket-chat
          filters:
            branches:
              only:
                - dev
      - docker/publish:
          deploy: false
          dockerfile: Dockerfile
          path: eduroom_socket_kahoot
          image: eduroom-socket-kahoot
          filters:
            branches:
              only:
                - dev
